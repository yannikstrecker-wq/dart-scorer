<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dart App – Cricket Layout B</title>
<style>
:root{
  --green:#1e7f4f;
  --gold:#d4af37;
  --bg:#050806;
  --panel:#111;
  --text:#f5f5f5;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:radial-gradient(circle at top,#1b5e3a 0%,var(--bg) 70%);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  color:var(--text);
  padding:10px;
}
.app{max-width:900px;margin:auto}
.header{
  display:flex;justify-content:space-between;align-items:center;
  border:2px solid var(--gold);border-radius:14px;
  padding:10px;background:#000;margin-bottom:12px
}
.header .status{color:var(--gold);font-weight:900}
.header button{
  background:#000;color:var(--gold);
  border:2px solid var(--gold);border-radius:10px;
  padding:6px 10px;font-weight:900
}
.panel{background:var(--panel);padding:12px;border-radius:14px;margin-bottom:12px}
.hidden{display:none}

/* INPUT */
.modes{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
.mode{
  padding:10px;font-weight:900;border-radius:10px;
  border:2px solid #0f5d35;background:#000;color:#eee
}
.mode.active{background:var(--gold);color:#000}
.numbers{display:grid;grid-template-columns:repeat(6,1fr);gap:6px}
.num{
  padding:14px;font-size:18px;font-weight:900;background:#000;color:#fff;
  border:2px solid #0f5d35;border-radius:10px
}
.bull{color:#ffd700}
.quickInput{display:flex;gap:6px;margin-top:6px}
.quickInput input{
  flex:1;padding:10px;border-radius:8px;border:2px solid #333;
  background:#000;color:#fff;text-align:center;font-weight:900
}
.quickInput button{
  padding:10px 14px;border-radius:8px;border:none;
  font-weight:900;background:var(--gold)
}
.actions{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px}
.btn{padding:14px;font-weight:900;border-radius:12px;border:none}
.green{background:var(--green);color:#000}

/* CRICKET LAYOUT B */
.cricketHeader{
  display:grid;
  grid-template-columns:1fr auto 1fr;
  margin-bottom:6px;
  text-align:center;
}
.cricketHeader div{font-weight:900}
.cricketGrid{
  display:grid;
  grid-template-columns:1fr 60px 1fr;
  row-gap:6px;
  align-items:center;
}
.row{
  display:contents;
}
.center{
  text-align:center;
  font-weight:900;
}
.marks{
  display:flex;
  justify-content:center;
  gap:4px;
}
.mark{
  width:8px;height:18px;
  background:#333;
  border-radius:3px;
}
.mark.on{background:var(--gold)}
.activePlayer{outline:2px solid var(--gold);border-radius:6px}
.scoreBox{text-align:center;font-size:14px;font-weight:900}
</style>
</head>
<body>
<div class="app">
  <div class="header">
    <div class="status">Cricket</div>
    <button onclick="resetApp()">⬅ Zurück ins Menü</button>
  </div>

  <div id="game" class="panel">
    <div class="cricketHeader">
      <div id="name0"></div>
      <div>ZIEL</div>
      <div id="name1"></div>
    </div>
    <div class="cricketHeader">
      <div id="pts0" class="scoreBox"></div>
      <div></div>
      <div id="pts1" class="scoreBox"></div>
    </div>

    <div class="cricketGrid" id="cricketGrid"></div>
  </div>

  <div id="input" class="panel">
    <div class="modes">
      <button class="mode active" onclick="setMult(1)">Single</button>
      <button class="mode" onclick="setMult(2)">Double</button>
      <button class="mode" onclick="setMult(3)">Triple</button>
    </div>
    <div class="numbers" id="nums"></div>
    <div class="quickInput">
      <input id="manual" type="number" min="0" max="60" placeholder="Wurf">
      <button onclick="manualThrow()">OK</button>
    </div>
    <div class="actions">
      <button class="btn green" onclick="nextTurn()">Weiter</button>
    </div>
  </div>
</div>

<script>
/* STATE */
let players=["Spieler A","Spieler B"];
let turn=0;
let mult=1;
let history=[];
const targets=[20,19,18,17,16,15,25];
let cricket=[
  {pts:0,m:{20:0,19:0,18:0,17:0,16:0,15:0,25:0}},
  {pts:0,m:{20:0,19:0,18:0,17:0,16:0,15:0,25:0}}
];

/* INIT UI */
document.getElementById("name0").textContent=players[0];
document.getElementById("name1").textContent=players[1];
buildGrid();
buildNums();
updateUI();

function resetApp(){
  turn=0;mult=1;history=[];
  cricket.forEach(p=>{
    p.pts=0;
    Object.keys(p.m).forEach(k=>p.m[k]=0);
  });
  updateUI();
}

function buildGrid(){
  const g=document.getElementById("cricketGrid");
  g.innerHTML="";
  targets.forEach(t=>{
    const row=document.createElement("div");
    row.className="row";

    const left=document.createElement("div");
    left.className="marks";
    left.id="m0_"+t;

    const mid=document.createElement("div");
    mid.className="center";
    mid.textContent=(t===25?"BULL":t);

    const right=document.createElement("div");
    right.className="marks";
    right.id="m1_"+t;

    g.append(left,mid,right);
  });
}

function buildNums(){
  const n=document.getElementById("nums");
  for(let i=0;i<=20;i++){
    let b=document.createElement("button");
    b.className="num";
    b.textContent=i;
    b.onclick=()=>throwDart(i*mult);
    n.appendChild(b);
  }
  let b25=document.createElement("button");
  b25.className="num bull";b25.textContent="BULL";
  b25.onclick=()=>throwDart(25);
  n.appendChild(b25);

  let b50=document.createElement("button");
  b50.className="num bull";b50.textContent="DBULL";
  b50.onclick=()=>throwDart(50);
  n.appendChild(b50);
}

function setMult(m){
  mult=m;
  document.querySelectorAll(".mode").forEach(b=>b.classList.remove("active"));
  document.querySelectorAll(".mode")[m-1].classList.add("active");
}
function resetMult(){ setMult(1); }

function manualThrow(){
  const v=+document.getElementById("manual").value;
  if(v>=0&&v<=60) throwDart(v);
  document.getElementById("manual").value="";
}

function snapshot(){
  return JSON.stringify({turn,cricket:JSON.parse(JSON.stringify(cricket))});
}
function restore(s){
  const o=JSON.parse(s);
  turn=o.turn; cricket=o.cricket;
}

function throwDart(v){
  history.push(snapshot());
  const map={15:15,16:16,17:17,18:18,19:19,20:20,25:25,50:25};
  const base=(v===50?25:v/mult);
  const key=map[base];
  if(key){
    for(let i=0;i<mult;i++){
      if(cricket[turn].m[key]<3){
        cricket[turn].m[key]++;
      }else if(cricket[1-turn].m[key]<3){
        cricket[turn].pts+=key;
      }
    }
  }
  resetMult();
  updateUI();
  checkEnd();
}

function nextTurn(){
  turn=1-turn;
  updateUI();
}

function updateUI(){
  document.getElementById("pts0").textContent=cricket[0].pts+" Punkte";
  document.getElementById("pts1").textContent=cricket[1].pts+" Punkte";
  targets.forEach(t=>{
    for(let p=0;p<2;p++){
      const el=document.getElementById("m"+p+"_"+t);
      el.innerHTML="";
      for(let i=0;i<3;i++){
        const d=document.createElement("div");
        d.className="mark"+(cricket[p].m[t]>i?" on":"");
        el.appendChild(d);
      }
      el.classList.toggle("activePlayer",p===turn);
    }
  });
}

function checkEnd(){
  const allClosed=targets.every(t=>cricket[0].m[t]>=3 && cricket[1].m[t]>=3);
  if(allClosed && cricket[0].pts!==cricket[1].pts){
    alert("Spielende! Gewinner: "+(cricket[0].pts>cricket[1].pts?players[0]:players[1]));
    resetApp();
  }
}
</script>
</body>
</html>
